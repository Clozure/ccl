r9822 trunk/source